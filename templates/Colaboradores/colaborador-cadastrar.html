{% extends "base1.html" %}

{% block content %}

<div class="column is-10 is-offset-1 is-vcentered">

		{% with messages = get_flashed_messages() %}
		{% if messages %}
			<div class="notification is-danger">
				{{ messages[0] }}
			</div>
		{% endif %}
		{% endwith %}

	<!-- Box com título do formulário -->
	<div class="box">
		<h1 class="title is-4 has-text-centered has-text-dark"> Cadastrar Novo Colaborador </h1>
	</div>

	<form id="formulario" method="POST" action="/colaborador/cadastrar" onsubmit="return confirm('Tem certeza de que deseja salvar essas informações?');">

	<div class="box ">
		<!-- 1a linha -->
		<div class="columns">
		  <div class="column">
				<div class="field">
				  <label class="label">Cargo<span class="has-text-danger">*</span></label>
				  <div class="control">
						<div class="select is-fullwidth">
						  <select name="cargo" required>
							<option disabled selected hidden></option>
							<option>Diretor</option>
							<option>Supervisor Administrativo</option>
							<option>Supervisor de Limpeza e Manutenção</option>
							<option>Treinador</option>
							<option>Técnico Administrativo</option>
							<option>Técnico de Limpeza</option>
							<option>Técnico de Manutenção</option>
						  </select>
						</div>
				  </div>
				</div>
		  </div>
		  <div class="column">
				<div class="field">
				  <label class="label">Situação<span class="has-text-danger">*</span></label>
				  <div class="control">
						<div class="select is-fullwidth">
						  <select name="situacao" required>
							<option disabled selected hidden></option>
							<option>Ativo</option>
							<option>Em afastamento</option>
							<option>Em licença</option>
							<option>Inativo</option>
							<option>Excluído por erro</option>
						  </select>
						</div>
				  </div>
				</div>
		  </div>
		</div>

		<!-- 2a linha -->
		<div class="columns">
		  <div class="column">
				<div class="field">
				  <label class="label">Nome<span class="has-text-danger">*</span></label>
				  <div class="control">
					<input class="input" type="text" placeholder="Digite o nome do colaborador" name="nome" required>
				  </div>
				</div>
		  </div>
		</div>

		<!-- 3a linha -->
		<div class="columns">
		  <div class="column">
				<div class="field">
				  <label class="label">Identidade</label>
				  <div class="control">
					<input class="input" type="text" placeholder="Digite o número de identidade" name="identidade" maxlength="13">
				  </div>
				</div>
		  </div>
		  <div class="column">
				<div class="field">
				  <label class="label">Data de Nascimento</label>
				  <div class="control">
					<input class="input" type="date" placeholder="00/00/0000" name="nascimento">
				  </div>
				</div>
		  </div>
		  <div class="column">
				<div class="field">
				  <label class="label">Gênero</label>
				  <div class="control">
					  <label class="radio">
						<input type="radio" name="genero" value="Masculino">
						Masculino
					  </label>
					  <label class="radio">
						<input type="radio" name="genero" value="Feminino">
						Feminino
					  </label>
					  <label class="radio">
						<input type="radio" name="genero" value="Não-binário">
						Não-binário
					  </label>
				  </div>
				</div>
		  </div>
		</div>
	</div>

	<div class="box">
		<!-- 4a linha -->
		<div class="columns">
		  <div class="column is-four-fifths">
				<div class="field">
				  <label class="label">Endereço residencial</label>
				  <div class="control">
					<input class="input" type="text" placeholder="Avenida / rua / travessa / etc." name="endereco">
				  </div>
				</div>
		  </div>
		  <div class="column is-one-fifth">
				<div class="field">
				  <label class="label">Número da residência</label>
				  <div class="control">
					<input class="input" type="number" min="0" placeholder="Número"  name="numero">
				  </div>
				</div>
		  </div>
		</div>

		<!-- 5a linha -->
		<div class="columns">
		  <div class="column">
				<div class="field">
				  <label class="label">Complemento</label>
				  <div class="control">
					<input class="input" type="text" maxlength="50" placeholder="Bloco / apartamento / etc." name="complemento">
				  </div>
				</div>
		  </div>
		  <div class="column">
				<div class="field">
				  <label class="label">CEP</label>
				  <div class="control">
					<input class="input" type="text" placeholder="00000-000" name="cep" oninput="formatarCEP(this)" maxlength="9">
				  </div>
				</div>
		  </div>
		  <div class="column">
				<div class="field">
				  <label class="label">Cidade</label>
				  <div class="control">
					<input class="input" type="text" maxlength="30" placeholder="Cidade" name="cidade">
				  </div>
				</div>
		  </div>
		  <div class="column">
				<div class="field">
				  <label class="label">Estado</label>
				  <div class="control">
						<div class="select is-fullwidth">
						  <select name="estado">
							<option></option>
							<option>Acre</option>
							<option>Alagoas</option>
							<option>Amapá</option>
							<option>Amazonas</option>
							<option>Bahia</option>
							<option>Ceará</option>
							<option>Distrito Federal</option>
							<option>Espírito Santo</option>
							<option>Goiás</option>
							<option>Maranhão</option>
							<option>Mato Grosso</option>
							<option>Mato Grosso do Sul</option>
							<option>Minas Gerais</option>
							<option>Pará</option>
							<option>Paraíba</option>
							<option>Paraná</option>
							<option>Pernambuco</option>
							<option>Piauí</option>
							<option>Rio de Janeiro</option>
							<option>Rio Grande do Norte</option>
							<option>Rio Grande do Sul</option>
							<option>Rondônia</option>
							<option>Roraima</option>
							<option>Santa Catarina</option>
							<option>São Paulo</option>
							<option>Sergipe</option>
							<option>Tocantins</option>
						  </select>
						</div>
				  </div>
				</div>
		  </div>
		</div>

		<!-- 6a linha -->
		<div class="columns">
		  <div class="column">
				<div class="field">
				  <label class="label">E-mail<span class="has-text-danger">*</span></label>
				  <div class="control">
					<input class="input" type="email" placeholder="ex.: eu@voce.com" name="email" required>
				  </div>
				</div>
		  </div>
		  <div class="column">
				<div class="field">
				  <label class="label">Telefone</label>
				  <div class="control">
					<input class="input" type="tel" placeholder="Telefone de contato" name="telefone" oninput="formatarTelefone(this)" maxlength="14">
				  </div>
				</div>
		  </div>
		</div>
	</div>

	<div class="box ">
		<!-- 7a linha -->
		<div class="columns">
		  <div class="column">
				<div class="field">
				  <label class="label">Regime de trabalho</label>
				  <div class="control">
						<div class="select is-fullwidth">
						  <select name="regime_trabalho">
							<option></option>
							<option>40 horas semanais</option>
							<option>20 horas semanais</option>
						  </select>
						</div>
				  </div>
				</div>
		  </div>
		  <div class="column">
				<div class="field">
				  <label class="label">Data de contratação</label>
				  <div class="control">
					<input class="input" type="date" placeholder="00/00/0000" name="data_contratacao">
				  </div>
				</div>
		  </div>
		</div>

		<!-- 8a linha -->
		<div class="columns">
		  <div class="column">
				<div class="field">
				  <label class="label">Observações</label>
				  <div class="control">
					<textarea class="textarea" placeholder="Ex.: Licenças, afasttamentos, etc." name="observacoes"></textarea>
				  </div>
				</div>
		  </div>
		</div>
	</div>

	<!-- Botões -->
	<div class="columns">
		<div class="column">
		</div>
		<div class="column has-text-centered">
			  <div class="control">
				<button type="submit" class="button is-link is-fullwidth">Cadastrar</button>
			  </div>
		</div>
		<div class="column has-text-centered">
			  <div class="control">
				<button id="bt-cancelar" type="button" class="button is-light is-fullwidth">Cancelar</button>
			  </div>
		</div>
		<div class="column">
		</div>
	</div>

	</form>

</div>

<script>
document.getElementById("bt-cancelar").addEventListener("click", function () {
    // Pede a confirmação do usuário
    var confirmacao = confirm("Deseja cancelar o cadastramento de novo colaborador?");
    if (confirmacao) {
        // Cancela o envio do formulário
        document.getElementById("formulario").reset();
        // Redireciona para a página raiz
        window.location.href = "/colaborador/cadastrar/cancelado";
    }
});

  function formatarCEP(input) {
    input.value = input.value
      .replace(/\D/g, '') // Remove todos os caracteres não numéricos
      .replace(/(\d{5})(\d{3})/, '$1-$2') // Adiciona o hífen no formato de CEP
      .slice(0, 9); // Limita o número máximo de caracteres a 9
  }

  function formatarTelefone(input) {
    input.value = input.value
      .replace(/[^\d()-]/g, '') // Remove todos os caracteres que não são números, parênteses ou hífen
      .slice(0, 14); // Limita o número máximo de caracteres a 14
  }

</script>

{% endblock %}